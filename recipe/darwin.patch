diff --git a/auto/feature b/auto/feature
index 3561f59..4bac086 100644
--- a/auto/feature
+++ b/auto/feature
@@ -49,6 +49,12 @@ eval "/bin/sh -c \"$ngx_test\" >> $NGX_AUTOCONF_ERR 2>&1"
 
 if [ -x $NGX_AUTOTEST ]; then
 
+    # cross-built autotest cannot be run on host platform
+    # just assume "found" if autotest can be built with the feature
+    if [ "$NGX_SYSTEM" = Darwin ]; then
+        ngx_feature_run=no 
+    fi
+
     case "$ngx_feature_run" in
 
         yes)
diff --git a/auto/unix b/auto/unix
index f29e69c..af9617a 100644
--- a/auto/unix
+++ b/auto/unix
@@ -640,51 +640,51 @@ ngx_feature_libs=
 
 # C types
 
-ngx_type="int"; . auto/types/sizeof
+# ngx_type="int"; . auto/types/sizeof
 
-ngx_type="long"; . auto/types/sizeof
+# ngx_type="long"; . auto/types/sizeof
 
-ngx_type="long long"; . auto/types/sizeof
+# ngx_type="long long"; . auto/types/sizeof
 
-ngx_type="void *"; . auto/types/sizeof; ngx_ptr_size=$ngx_size
-ngx_param=NGX_PTR_SIZE; ngx_value=$ngx_size; . auto/types/value
+# ngx_type="void *"; . auto/types/sizeof; ngx_ptr_size=$ngx_size
+# ngx_param=NGX_PTR_SIZE; ngx_value=$ngx_size; . auto/types/value
 
 
 # POSIX types
 
-NGX_INCLUDE_AUTO_CONFIG_H="#include \"ngx_auto_config.h\""
+# NGX_INCLUDE_AUTO_CONFIG_H="#include \"ngx_auto_config.h\""
 
-ngx_type="uint32_t"; ngx_types="u_int32_t"; . auto/types/typedef
-ngx_type="uint64_t"; ngx_types="u_int64_t"; . auto/types/typedef
+# ngx_type="uint32_t"; ngx_types="u_int32_t"; . auto/types/typedef
+# ngx_type="uint64_t"; ngx_types="u_int64_t"; . auto/types/typedef
 
-ngx_type="sig_atomic_t"; ngx_types="int"; . auto/types/typedef
-. auto/types/sizeof
-ngx_param=NGX_SIG_ATOMIC_T_SIZE; ngx_value=$ngx_size; . auto/types/value
+# ngx_type="sig_atomic_t"; ngx_types="int"; . auto/types/typedef
+# . auto/types/sizeof
+# ngx_param=NGX_SIG_ATOMIC_T_SIZE; ngx_value=$ngx_size; . auto/types/value
 
-ngx_type="socklen_t"; ngx_types="int"; . auto/types/typedef
+# ngx_type="socklen_t"; ngx_types="int"; . auto/types/typedef
 
-ngx_type="in_addr_t"; ngx_types="uint32_t u_int32_t"; . auto/types/typedef
+# ngx_type="in_addr_t"; ngx_types="uint32_t u_int32_t"; . auto/types/typedef
 
-ngx_type="in_port_t"; ngx_types="u_short"; . auto/types/typedef
+# ngx_type="in_port_t"; ngx_types="u_short"; . auto/types/typedef
 
-ngx_type="rlim_t"; ngx_types="int"; . auto/types/typedef
+# ngx_type="rlim_t"; ngx_types="int"; . auto/types/typedef
 
-. auto/types/uintptr_t
+# . auto/types/uintptr_t
 
-. auto/endianness
+# . auto/endianness
 
-ngx_type="size_t"; . auto/types/sizeof
-ngx_param=NGX_MAX_SIZE_T_VALUE; ngx_value=$ngx_max_value; . auto/types/value
-ngx_param=NGX_SIZE_T_LEN; ngx_value=$ngx_max_len; . auto/types/value
+# ngx_type="size_t"; . auto/types/sizeof
+# ngx_param=NGX_MAX_SIZE_T_VALUE; ngx_value=$ngx_max_value; . auto/types/value
+# ngx_param=NGX_SIZE_T_LEN; ngx_value=$ngx_max_len; . auto/types/value
 
-ngx_type="off_t"; . auto/types/sizeof
-ngx_param=NGX_MAX_OFF_T_VALUE; ngx_value=$ngx_max_value; . auto/types/value
-ngx_param=NGX_OFF_T_LEN; ngx_value=$ngx_max_len; . auto/types/value
+# ngx_type="off_t"; . auto/types/sizeof
+# ngx_param=NGX_MAX_OFF_T_VALUE; ngx_value=$ngx_max_value; . auto/types/value
+# ngx_param=NGX_OFF_T_LEN; ngx_value=$ngx_max_len; . auto/types/value
 
-ngx_type="time_t"; . auto/types/sizeof
-ngx_param=NGX_TIME_T_SIZE; ngx_value=$ngx_size; . auto/types/value
-ngx_param=NGX_TIME_T_LEN; ngx_value=$ngx_max_len; . auto/types/value
-ngx_param=NGX_MAX_TIME_T_VALUE; ngx_value=$ngx_max_value; . auto/types/value
+# ngx_type="time_t"; . auto/types/sizeof
+# ngx_param=NGX_TIME_T_SIZE; ngx_value=$ngx_size; . auto/types/value
+# ngx_param=NGX_TIME_T_LEN; ngx_value=$ngx_max_len; . auto/types/value
+# ngx_param=NGX_MAX_TIME_T_VALUE; ngx_value=$ngx_max_value; . auto/types/value
 
 
 # syscalls, libc calls and some features
diff --git a/src/os/unix/ngx_darwin_config.h b/src/os/unix/ngx_darwin_config.h
index 0dfe633..18dd51f 100644
--- a/src/os/unix/ngx_darwin_config.h
+++ b/src/os/unix/ngx_darwin_config.h
@@ -96,5 +96,24 @@
 
 extern char **environ;
 
-
-#endif /* _NGX_DARWIN_CONFIG_H_INCLUDED_ */
+#define NGX_PTR_SIZE            8
+#define NGX_SIZE_T_LEN          (sizeof("-9223372036854775808") - 1)
+#define NGX_MAX_SIZE_T_VALUE    9223372036854775807LL
+#define NGX_TIME_T_LEN          (sizeof("-9223372036854775808") - 1)
+#define NGX_TIME_T_SIZE         8
+#define NGX_MAX_TIME_T_VALUE    9223372036854775807LL
+#define NGX_OFF_T_LEN           (sizeof("-9223372036854775808") - 1)
+#define NGX_MAX_OFF_T_VALUE     9223372036854775807LL
+#define NGX_SIG_ATOMIC_T_SIZE   4
+
+#define NGX_HAVE_LITTLE_ENDIAN  1
+
+/* diff ngx_auto_config.h from native system 
+to one generated by patched auto/feature on cross-compile system */
+#define NGX_SYS_NERR  107
+#define NGX_DARWIN_KEVENT_BUG 0
+#define NGX_HAVE_MAP_DEVZERO 0
+#define NGX_HAVE_POSIX_SEM 0
+#define NGX_HAVE_SENDFILE  1
+
+#endif /* _NGX_DARWIN_CONFIG_H_INCLUDED_ */
\ No newline at end of file
